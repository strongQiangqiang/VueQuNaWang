<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Vue组件的使用中的细节点</title>
  <script src="../until/vue.js"></script>
</head>
<body>
  <div id="app">
    <!-- 1.用is去解决模板标签li组件渲染到ul外面 -->
    <ul>
      <li is="lidom"></li>
      <li is="lidom"></li>
    </ul>
    <!-- 2. -->
    <table>
      <tbody>
        <tr is="row"></tr>
        <tr is="row"></tr>
      </tbody>
    </table>
    <!-- 3.通过ref引用来操作dom -->
    <div @click="handleClick" ref="hello">
        Hello world
    </div>
    <!-- 4.通过ref来获取组件 -->
    <div>
      <counter @change="handleChange" ref="one"></counter>
      <counter @change="handleChange" ref="two"></counter>
      <div>{{total}}</div>
    </div>
  </div>
</body>
<script>
  Vue.component('lidom', {
    template: '<li>this is a row</li>'
  })
  Vue.component('row', {
    // 子组件定义data的时候必须是个方法，通过函数来返回一个对象的目的，
    // 来让每个子组件都有独立的数据存储，相互间不影响
    data: function() {
      return {
        content: 'this is a row'
      }
    },
    template: '<tr><td>{{content}}</td></tr>'
  })
  Vue.component('counter', {
    data: function() {
      return {
        number: 0
      }
    },
    template: '<div @click="handleClick">{{number}}</div>',
    methods: {
      handleClick: function() {
        this.number ++
        this.$emit('change')
      }
    }
  })
  var vm = new Vue({ // 根实例
    el: '#app',
    data: {
      total: 0,
    },
    methods: {
      handleClick: function() {
        console.log(this.$refs.hello)
      },
      handleChange: function() {
        this.total = this.$refs.one.number + this.$refs.two.number
        console.log(this.$refs.one)
      }
    }
  })
</script>
</html>